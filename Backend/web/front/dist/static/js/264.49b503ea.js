"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[264],{5882:function(e,i,a){a.d(i,{c:function(){return n}});const n=[{name:"复制链接",icon:"link"}]},6610:function(e,i,a){a.d(i,{Z:function(){return S}});var n=a(3396),c=a(9242),t=a(7139);const o=e=>((0,n.dD)("data-v-7e33c823"),e=e(),(0,n.Cn)(),e),l={class:"topic-title"},s={class:"topic-intro van-multi-ellipsis--l2"},r=o((()=>(0,n._)("p",{class:"yes-ratio"},"Yes",-1))),u=o((()=>(0,n._)("p",{class:"no-ratio"},"No",-1))),d={class:"yes-ratio-price"},p={class:"no-ratio-price"};function h(e,i,a,o,h,v){const m=(0,n.up)("van-loading"),f=(0,n.up)("van-image"),C=(0,n.up)("van-icon"),_=(0,n.up)("van-progress"),g=(0,n.up)("van-divider");return(0,n.wg)(),(0,n.iD)("div",{class:"single-topic",onClick:i[1]||(i[1]=i=>e.handleTopicClick(e.topic?.tid))},[(0,n.Wm)(f,{src:e.topic?.img_url,fit:"cover","lazy-load":"",alt:e.topic?.title,radius:"10px"},{loading:(0,n.w5)((()=>[(0,n.Wm)(m,{type:"spinner",size:"20"})])),error:(0,n.w5)((()=>[(0,n.Uk)("error")])),_:1},8,["src","alt"]),(0,n.Wm)(C,{name:"star",class:"icon-star",size:"2rem",color:!0===e.isCollect?"#fbff25":"#838383",onClick:(0,c.iM)(e.handleCollectClick,["stop"])},null,8,["color","onClick"]),(0,n._)("p",l,(0,t.zw)(e.topic?.title),1),(0,n._)("h4",s,(0,t.zw)(e.topic?.intro),1),r,u,(0,n.Wm)(_,{percentage:100*e.topic?.yes_ratio,"stroke-width":"16",color:"#61D089","pivot-color":e.topic?.yes_ratio<.5?"#f2a4a4":"#61D089"},null,8,["percentage","pivot-color"]),(0,n._)("div",null,[(0,n.Wm)(C,{name:"points",class:"icon-points",size:"1rem"},{default:(0,n.w5)((()=>[(0,n._)("span",null,(0,t.zw)(e.topic?.total_price),1)])),_:1}),(0,n._)("span",d,"YES "+(0,t.zw)(e.topic?.yes_ratio_price),1),(0,n._)("span",p,"NO "+(0,t.zw)(e.topic?.no_ratio_price),1),(0,n.Wm)(C,{name:"guide-o",class:"icon-guide",size:"1rem",onClick:i[0]||(i[0]=(0,c.iM)((i=>e.handleShareClick(e.topic?.tid)),["stop"]))})]),(0,n.Wm)(g)])}a(7658);var v=a(7520),m=a(4870),f=a(2483),C=a(7330),_=a(9733),g=a(5882),k=(0,n.aZ)({props:{topic:{type:Object,required:!1}},emits:["showShareCard"],setup(e,{emit:i}){const a=(0,m.iH)(!1),n=(0,f.tv)(),c=(0,C.oR)(),t=(0,f.yj)(),o=c.state.login.userInfo,l=async()=>{if(c.state.login.userInfo.mixin_uuid){const i=await(0,v.oj)("/collect/check",{user_id:c.state.login.userInfo.mixin_uuid,tid:e.topic?.tid});null!==i.data&&(a.value=!0)}};l();const s=async()=>{if(o.mixin_uuid){if(!0===a.value){const i=await(0,v.oj)("/collect/delete",{user_id:c.state.login.userInfo.mixin_uuid,tid:e.topic?.tid});null!==i.data&&(a.value=!1),(0,_.F)("删除收藏!!!")}else{const i=await(0,v.oj)("/collect/add",{user_id:c.state.login.userInfo.mixin_uuid,tid:e.topic?.tid});null===i.data&&(a.value=!0),(0,_.F)("收藏成功!!!")}c.dispatch("main/handleCollecTopictAction")}else c.dispatch("login/accountLoginAction",t.path)},r=e=>{n.push(`/topic/${e}`)},u=e=>{console.log("handleShareClick"),i("showShareCard",e)};return{shareOptions:g.c,isCollect:a,handleCollectClick:s,handleTopicClick:r,handleShareClick:u}}}),w=a(89);const y=(0,w.Z)(k,[["render",h],["__scopeId","data-v-7e33c823"]]);var S=y},8264:function(e,i,a){a.r(i),a.d(i,{default:function(){return f}});var n=a(3396);const c=e=>((0,n.dD)("data-v-dfc2cb60"),e=e(),(0,n.Cn)(),e),t={class:"search"},o={class:"search-header"},l=c((()=>(0,n._)("span",{class:"nav-title"},[(0,n._)("strong",null,"BETXIN")],-1)));function s(e,i,a,c,s,r){const u=(0,n.up)("van-icon"),d=(0,n.up)("van-search"),p=(0,n.up)("single-topic");return(0,n.wg)(),(0,n.iD)("div",t,[(0,n._)("div",o,[(0,n.Wm)(u,{name:"arrow-left",size:"1.5rem",onClick:e.handleBackClick},null,8,["onClick"]),l]),(0,n.Wm)(d,{modelValue:e.searchValue,"onUpdate:modelValue":i[0]||(i[0]=i=>e.searchValue=i),"show-action":"",placeholder:"Please input...",onSearch:e.handleSearchClick,onCancel:e.handleCancelSearch,maxlength:"10","action-text":"Cancel"},null,8,["modelValue","onSearch","onCancel"]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.searchTopicList,(e=>((0,n.wg)(),(0,n.j4)(p,{key:e,topic:e},null,8,["topic"])))),128))])}var r=a(7520),u=a(4870),d=a(2483),p=a(6610),h=(0,n.aZ)({components:{SingleTopic:p.Z},setup(){const e=(0,d.tv)(),i=(0,u.iH)("");let a=(0,u.iH)();const n=(0,u.iH)(!1),c=(0,u.iH)(!1),t=()=>{e.back()},o=async()=>{n.value=!0;const e=await(0,r.bD)("/topic/search",{offset:a.value?.length??0,limit:10,intro:i.value});console.log(e),a.value=e.data.list,c.value=!1},l=()=>{i.value="",a.value=[]};return{searchValue:i,loading:n,finished:c,searchTopicList:a,handleBackClick:t,handleSearchClick:o,handleCancelSearch:l}}}),v=a(89);const m=(0,v.Z)(h,[["render",s],["__scopeId","data-v-dfc2cb60"]]);var f=m}}]);
//# sourceMappingURL=264.49b503ea.js.map