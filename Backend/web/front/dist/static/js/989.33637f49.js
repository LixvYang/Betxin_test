"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[989],{2030:function(e,t,i){i.d(t,{Z:function(){return g}});var n=i(3396);const o={class:"page-topic"};function a(e,t,i,a,c,l){const s=(0,n.up)("single-topic"),r=(0,n.up)("van-list"),u=(0,n.up)("van-share-sheet");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n.Wm)(r,{loading:e.loading,"onUpdate:loading":t[0]||(t[0]=t=>e.loading=t),finished:e.finished,"finished-text":"No More",onLoad:e.getTopicList},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.topicList,(t=>((0,n.wg)(),(0,n.j4)(s,{key:t,topic:t,onShowShareCard:e.showShareCard},null,8,["topic","onShowShareCard"])))),128))])),_:1},8,["loading","finished","onLoad"]),(0,n.Wm)(u,{show:e.showShare,"onUpdate:show":t[1]||(t[1]=t=>e.showShare=t),title:"Share",options:e.shareOptions,onSelect:e.onSelectShare},null,8,["show","options","onSelect"])])}var c=i(7330),l=i(4870),s=i(8354),r=i(7520),u=i(9733),d=i(5882),p=(0,n.aZ)({components:{SingleTopic:s.Z},props:{cid:{type:Number,required:!1},name:{type:String,required:!0}},setup(e){const t=(0,l.iH)(),i=(0,c.oR)(),o=(0,l.iH)(!1),a=(0,l.iH)(!1),s=(0,l.iH)(!1),p=(0,l.iH)(0),h=(0,n.Fl)((()=>i.getters["main/pageListData"](e.name))),m=(0,n.Fl)((()=>i.getters["main/pageListCount"](e.name))),v=()=>{let t={offset:h.value.length,limit:10};(0,r.bD)(`/topic/${e.cid}`,t).then((t=>{0===m.value||h.value.length<m.value?(i.commit(`main/changeTopic${e.name}Count`,t.data?.totalCount),i.commit(`main/pushTopic${e.name}List`,t.data?.list),a.value=!1,h.value?.length>=m.value&&(s.value=!0)):h.value.length===m.value&&(s.value=!0)}))},g=()=>{p.value=0,s.value=!1},f=e=>{(0,u.F)(e.name),o.value=!1;const i=document.createElement("input");document.body.appendChild(i),i.setAttribute("readonly","readonly"),i.setAttribute("value",`http://betxin.one/topic/${t.value}`),i.select(),document.execCommand("copy"),document.body.removeChild(i)},C=e=>{o.value=!0,t.value=e};return{showShare:o,topicList:h,finished:s,loading:a,getTopicList:v,changeFinished:g,onSelectShare:f,shareOptions:d.c,showShareCard:C}}}),h=i(89);const m=(0,h.Z)(p,[["render",a],["__scopeId","data-v-5da7e48c"]]);var v=m,g=v},5882:function(e,t,i){i.d(t,{c:function(){return n}});const n=[{name:"复制链接",icon:"link"}]},6989:function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var n=i(3396);const o={class:"business"};function a(e,t,i,a,c,l){const s=(0,n.up)("page-topic");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n.Wm)(s,{cid:6,name:"Trending"})])}var c=i(2030),l=(0,n.aZ)({components:{PageTopic:c.Z},setup(){return{}}}),s=i(89);const r=(0,s.Z)(l,[["render",a]]);var u=r,d=u},8354:function(e,t,i){i.d(t,{Z:function(){return S}});var n=i(3396),o=i(9242),a=i(7139);const c=e=>((0,n.dD)("data-v-c58de070"),e=e(),(0,n.Cn)(),e),l={class:"topic-title"},s={class:"topic-intro van-multi-ellipsis--l2"},r=c((()=>(0,n._)("p",{class:"yes-ratio"},"Yes",-1))),u=c((()=>(0,n._)("p",{class:"no-ratio"},"No",-1)));function d(e,t,i,c,d,p){const h=(0,n.up)("van-loading"),m=(0,n.up)("van-image"),v=(0,n.up)("van-icon"),g=(0,n.up)("van-progress"),f=(0,n.up)("van-divider");return(0,n.wg)(),(0,n.iD)("div",{class:"single-topic",onClick:t[1]||(t[1]=t=>e.handleTopicClick(e.topic?.tid))},[(0,n.Wm)(m,{src:e.topic?.img_url,fit:"cover","lazy-load":"",alt:e.topic?.title,radius:"10px"},{loading:(0,n.w5)((()=>[(0,n.Wm)(h,{type:"spinner",size:"20"})])),error:(0,n.w5)((()=>[(0,n.Uk)("error")])),_:1},8,["src","alt"]),(0,n.Wm)(v,{name:"star",class:"icon-star",size:"2rem",color:!0===e.isCollect?"#fbff25":"#838383",onClick:(0,o.iM)(e.handleCollectClick,["stop"])},null,8,["color","onClick"]),(0,n._)("p",l,(0,a.zw)(e.topic?.title),1),(0,n._)("h4",s,(0,a.zw)(e.topic?.intro),1),r,u,(0,n.Wm)(g,{percentage:e.topic?.yes_ratio,"stroke-width":"16",color:"#61D089","pivot-color":e.topic?.yes_ratio<=50?"#f2a4a4":"#61D089"},null,8,["percentage","pivot-color"]),(0,n._)("div",null,[(0,n.Wm)(v,{name:"points",class:"icon-points",size:"1rem"},{default:(0,n.w5)((()=>[(0,n._)("span",null,(0,a.zw)(e.topic?.total_price),1)])),_:1}),(0,n.Wm)(v,{name:"guide-o",class:"icon-guide",size:"1rem",onClick:t[0]||(t[0]=(0,o.iM)((t=>e.handleShareClick(e.topic?.tid)),["stop"]))})]),(0,n.Wm)(f)])}i(7658);var p=i(7520),h=i(4870),m=i(2483),v=i(7330),g=i(9733),f=i(5882),C=(0,n.aZ)({props:{topic:{type:Object,required:!1}},emits:["showShareCard"],setup(e,{emit:t}){const i=(0,h.iH)(!1),n=(0,m.tv)(),o=(0,v.oR)(),a=(0,m.yj)(),c=o.state.login.userInfo,l=async()=>{if(o.state.login.userInfo.mixin_uuid){const t=await(0,p.oj)("/collect/check",{user_id:o.state.login.userInfo.mixin_uuid,tid:e.topic?.tid});null!==t.data&&(i.value=!0)}};l();const s=async()=>{if(c.mixin_uuid){if(!0===i.value){const t=await(0,p.oj)("/collect/delete",{user_id:o.state.login.userInfo.mixin_uuid,tid:e.topic?.tid});null!==t.data&&(i.value=!1),(0,g.F)("删除收藏!!!")}else{const t=await(0,p.oj)("/collect/add",{user_id:o.state.login.userInfo.mixin_uuid,tid:e.topic?.tid});null===t.data&&(i.value=!0),(0,g.F)("收藏成功!!!")}o.dispatch("main/handleCollecTopictAction")}else o.dispatch("login/accountLoginAction",a.path)},r=e=>{n.push(`/topic/${e}`)},u=e=>{console.log("handleShareClick"),t("showShareCard",e)};return{shareOptions:f.c,isCollect:i,handleCollectClick:s,handleTopicClick:r,handleShareClick:u}}}),w=i(89);const _=(0,w.Z)(C,[["render",d],["__scopeId","data-v-c58de070"]]);var S=_}}]);
//# sourceMappingURL=989.33637f49.js.map