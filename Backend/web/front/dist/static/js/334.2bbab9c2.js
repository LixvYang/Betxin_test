"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[334],{5882:function(e,t,o){o.d(t,{c:function(){return n}});const n=[{name:"复制链接",icon:"link"}]},3300:function(e,t,o){o.d(t,{Z:function(){return _}});var n=o(3396),i=o(9242),s=o(7139);const l=e=>((0,n.dD)("data-v-69c05f5d"),e=e(),(0,n.Cn)(),e),c={class:"topic-title"},a={class:"topic-intro van-multi-ellipsis--l2"},r=l((()=>(0,n._)("p",{class:"yes-ratio"},"Yes",-1))),u=l((()=>(0,n._)("p",{class:"no-ratio"},"No",-1)));function d(e,t,o,l,d,p){const f=(0,n.up)("van-loading"),m=(0,n.up)("van-image"),v=(0,n.up)("van-icon"),g=(0,n.up)("van-progress"),y=(0,n.up)("van-divider");return(0,n.wg)(),(0,n.iD)("div",{class:"single-topic",onClick:t[1]||(t[1]=t=>e.handleTopicClick(e.topic?.tid))},[(0,n.Wm)(m,{src:e.topic?.img_url,fit:"cover","lazy-load":"",alt:e.topic?.title,radius:"10px"},{loading:(0,n.w5)((()=>[(0,n.Wm)(f,{type:"spinner",size:"20"})])),error:(0,n.w5)((()=>[(0,n.Uk)("error")])),_:1},8,["src","alt"]),(0,n.Wm)(v,{name:"star",class:"icon-star",size:"2rem",color:!0===e.isCollect?"#fbff25":"#838383",onClick:(0,i.iM)(e.handleCollectClick,["stop"])},null,8,["color","onClick"]),(0,n._)("p",c,(0,s.zw)(e.topic?.title),1),(0,n._)("h4",a,(0,s.zw)(e.topic?.intro),1),r,u,(0,n.Wm)(g,{percentage:e.topic?.yes_ratio,"stroke-width":"16",color:"#61D089","pivot-color":e.topic?.yes_ratio<=50?"#f2a4a4":"#61D089"},null,8,["percentage","pivot-color"]),(0,n._)("div",null,[(0,n.Wm)(v,{name:"points",class:"icon-points",size:"1rem"},{default:(0,n.w5)((()=>[(0,n._)("span",null,(0,s.zw)(e.topic?.total_price),1)])),_:1}),(0,n.Wm)(v,{name:"guide-o",class:"icon-guide",size:"1rem",onClick:t[0]||(t[0]=(0,i.iM)((t=>e.handleShareClick(e.topic?.tid)),["stop"]))})]),(0,n.Wm)(y)])}o(7658);var p=o(7520),f=o(4870),m=o(2483),v=o(9089),g=o(9733),y=o(5882),h=(0,n.aZ)({props:{topic:{type:Object,required:!1}},emits:["showShareCard"],setup(e,{emit:t}){const o=(0,f.iH)(!1),n=(0,m.tv)(),i=(0,v.oR)(),s=(0,m.yj)(),l=i.state.login.userInfo,c=async()=>{if(i.state.login.userInfo.mixin_uuid){const t=await(0,p.oj)("/collect/check",{user_id:i.state.login.userInfo.mixin_uuid,tid:e.topic?.tid});null!==t.data&&(o.value=!0)}};c();const a=async()=>{if(l.mixin_uuid){if(!0===o.value){const t=await(0,p.oj)("/collect/delete",{user_id:i.state.login.userInfo.mixin_uuid,tid:e.topic?.tid});null!==t.data&&(o.value=!1),(0,g.F)("删除收藏!!!")}else{const t=await(0,p.oj)("/collect/add",{user_id:i.state.login.userInfo.mixin_uuid,tid:e.topic?.tid});null===t.data&&(o.value=!0),(0,g.F)("收藏成功!!!")}i.dispatch("main/handleCollecTopictAction")}else i.dispatch("login/accountLoginAction",s.path)},r=e=>{n.push(`/topic/${e}`)},u=e=>{console.log("handleShareClick"),t("showShareCard",e)};return{shareOptions:y.c,isCollect:o,handleCollectClick:a,handleTopicClick:r,handleShareClick:u}}}),w=o(89);const C=(0,w.Z)(h,[["render",d],["__scopeId","data-v-69c05f5d"]]);var _=C},4334:function(e,t,o){o.r(t),o.d(t,{default:function(){return S}});var n=o(3396),i=o(7139);const s={class:"user"},l={class:"userinfo-name"},c={class:"userinfo_identity"};function a(e,t,o,a,r,u){const d=(0,n.up)("van-image"),p=(0,n.up)("van-card"),f=(0,n.up)("user-buy"),m=(0,n.up)("van-tab"),v=(0,n.up)("user-collect"),g=(0,n.up)("van-tabs");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(p,{centered:"","lazy-load":""},{thumb:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"userinfo-avatar",src:e.userInfo.avatar_url,round:"",position:"left",width:"4rem",height:"4rem","lazy-load":""},null,8,["src"])])),title:(0,n.w5)((()=>[(0,n._)("p",l,(0,i.zw)(e.userInfo.full_name),1)])),desc:(0,n.w5)((()=>[(0,n._)("p",c,(0,i.zw)(e.userInfo.identity_number),1)])),_:1}),(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m,{title:"Buy"},{default:(0,n.w5)((()=>[(0,n.Wm)(f)])),_:1}),(0,n.Wm)(m,{title:"Collect"},{default:(0,n.w5)((()=>[(0,n.Wm)(v)])),_:1})])),_:1})])}var r=o(9089);const u={class:"user-buy"};function d(e,t,o,i,s,l){const c=(0,n.up)("single-topic");return(0,n.wg)(),(0,n.iD)("div",u,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.userToTopicList,(e=>((0,n.wg)(),(0,n.j4)(c,{key:e,topic:e.topic},null,8,["topic"])))),128))])}var p=o(3300),f=(0,n.aZ)({components:{SingleTopic:p.Z},setup(){const e=(0,r.oR)(),t=(0,n.Fl)((()=>e.state.main.userToTopicList));return{userToTopicList:t}}}),m=o(89);const v=(0,m.Z)(f,[["render",d],["__scopeId","data-v-9c394c5c"]]);var g=v;const y={class:"user-collect"};function h(e,t,o,i,s,l){const c=(0,n.up)("single-topic");return(0,n.wg)(),(0,n.iD)("div",y,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.userCollectTopicList,(e=>((0,n.wg)(),(0,n.j4)(c,{key:e,topic:e.topic},null,8,["topic"])))),128))])}var w=(0,n.aZ)({components:{SingleTopic:p.Z},setup(){const e=(0,r.oR)(),t=(0,n.Fl)((()=>e.state.main.userCollectTopicList));return{userCollectTopicList:t}}});const C=(0,m.Z)(w,[["render",h],["__scopeId","data-v-217c7348"]]);var _=C,k=(0,n.aZ)({components:{UserBuy:g,UserCollect:_},setup(){const e=(0,r.oR)(),t=(0,n.Fl)((()=>e.state.login.userInfo));return{userInfo:t}}});const b=(0,m.Z)(k,[["render",a],["__scopeId","data-v-eb520708"]]);var S=b},9733:function(e,t,o){o.d(t,{F:function(){return x}});o(7658);var n=o(3396),i=o(4870),s=o(2220),l=o(6491),c=o(1404),a=o(7548),r=o(610),u=o(5323);let d=0;function p(e){e?(d||document.body.classList.add("van-toast--unclickable"),d++):d&&(d--,d||document.body.classList.remove("van-toast--unclickable"))}var f=o(3649),m=o(6305),v=o(2229);const[g,y]=(0,r["do"])("toast"),h=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],w={icon:String,show:Boolean,type:(0,u.SQ)("text"),overlay:Boolean,message:u.Or,iconSize:u.Or,duration:(0,u.qM)(2e3),position:(0,u.SQ)("middle"),teleport:[String,Object],className:u.Vg,iconPrefix:String,transition:(0,u.SQ)("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:u.Vg,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var C=(0,n.aZ)({name:g,props:w,emits:["update:show"],setup(e,{emit:t}){let o,i=!1;const c=()=>{const t=e.show&&e.forbidClick;i!==t&&(i=t,p(i))},a=e=>t("update:show",e),r=()=>{e.closeOnClick&&a(!1)},u=()=>clearTimeout(o),d=()=>{const{icon:t,type:o,iconSize:i,iconPrefix:s,loadingType:l}=e,c=t||"success"===o||"fail"===o;return c?(0,n.Wm)(f.J,{name:t||o,size:i,class:y("icon"),classPrefix:s},null):"loading"===o?(0,n.Wm)(v.g,{class:y("loading"),size:i,type:l},null):void 0},g=()=>{const{type:t,message:o}=e;if((0,l.Xq)(o)&&""!==o)return"html"===t?(0,n.Wm)("div",{key:0,class:y("text"),innerHTML:String(o)},null):(0,n.Wm)("div",{class:y("text")},[o])};return(0,n.YP)((()=>[e.show,e.forbidClick]),c),(0,n.YP)((()=>[e.show,e.type,e.message,e.duration]),(()=>{u(),e.show&&e.duration>0&&(o=setTimeout((()=>{a(!1)}),e.duration))})),(0,n.bv)(c),(0,n.Ah)(c),()=>(0,n.Wm)(m.G,(0,n.dG)({class:[y([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:r,onClosed:u,"onUpdate:show":a},(0,s.ei)(e,h)),{default:()=>[d(),g()]})}});const _={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let k=[],b=!1,S=(0,s.l7)({},_);const T=new Map;function W(e){return(0,l.Kn)(e)?e:{message:e}}function O(){const{instance:e,unmount:t}=(0,a.H)({setup(){const o=(0,i.iH)(""),{open:s,state:l,close:c,toggle:r}=(0,a.o)(),u=()=>{b&&(k=k.filter((t=>t!==e)),t())},d=()=>{const e={onClosed:u,"onUpdate:show":r};return(0,n.Wm)(C,(0,n.dG)(l,e),null)};return(0,n.YP)(o,(e=>{l.message=e})),(0,n.FN)().render=d,{open:s,clear:c,message:o}}});return e}function z(){if(!k.length||b){const e=O();k.push(e)}return k[k.length-1]}function x(e={}){if(!s._f)return{};const t=z(),o=W(e);return t.open((0,s.l7)({},S,T.get(o.type||S.type),o)),t}const I=e=>t=>x((0,s.l7)({type:e},W(t)));function Z(e,t){"string"===typeof e?T.set(e,t):(0,s.l7)(S,e)}x.loading=I("loading"),x.success=I("success"),x.fail=I("fail"),x.clear=e=>{var t;k.length&&(e?(k.forEach((e=>{e.clear()})),k=[]):b?null==(t=k.shift())||t.clear():k[0].clear())},x.setDefaultOptions=Z,x.resetDefaultOptions=e=>{"string"===typeof e?T.delete(e):(S=(0,s.l7)({},_),T.clear())},x.allowMultiple=(e=!0)=>{b=e},x.install=e=>{e.use((0,c.n)(C)),e.config.globalProperties.$toast=x}}}]);
//# sourceMappingURL=334.2bbab9c2.js.map