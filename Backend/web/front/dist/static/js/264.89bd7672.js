"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[264],{5882:function(e,i,a){a.d(i,{c:function(){return n}});const n=[{name:"复制链接",icon:"link"}]},1591:function(e,i,a){a.d(i,{Z:function(){return w}});var n=a(3396),t=a(9242),l=a(7139);const c=e=>((0,n.dD)("data-v-a5def406"),e=e(),(0,n.Cn)(),e),o={class:"topic-title"},s={class:"topic-intro van-multi-ellipsis--l2"},r=c((()=>(0,n._)("p",{class:"yes-ratio"},"Yes",-1))),u=c((()=>(0,n._)("p",{class:"no-ratio"},"No",-1)));function d(e,i,a,c,d,p){const h=(0,n.up)("van-loading"),v=(0,n.up)("van-image"),f=(0,n.up)("van-icon"),m=(0,n.up)("van-progress"),C=(0,n.up)("van-divider");return(0,n.wg)(),(0,n.iD)("div",{class:"single-topic",onClick:i[1]||(i[1]=i=>e.handleTopicClick(e.topic?.tid))},[(0,n.Wm)(v,{src:e.topic?.img_url,fit:"cover","lazy-load":"",alt:e.topic?.title,radius:"10px"},{loading:(0,n.w5)((()=>[(0,n.Wm)(h,{type:"spinner",size:"20"})])),error:(0,n.w5)((()=>[(0,n.Uk)("error")])),_:1},8,["src","alt"]),(0,n.Wm)(f,{name:"star",class:"icon-star",size:"2rem",color:!0===e.isCollect?"#fbff25":"#838383",onClick:(0,t.iM)(e.handleCollectClick,["stop"])},null,8,["color","onClick"]),(0,n._)("p",o,(0,l.zw)(e.topic?.title),1),(0,n._)("h4",s,(0,l.zw)(e.topic?.intro),1),r,u,(0,n.Wm)(m,{percentage:e.topic?.yes_ratio,"stroke-width":"16",color:"#61D089","pivot-color":e.topic?.yes_ratio<=50?"#f2a4a4":"#61D089"},null,8,["percentage","pivot-color"]),(0,n._)("div",null,[(0,n.Wm)(f,{name:"points",class:"icon-points",size:"1rem"},{default:(0,n.w5)((()=>[(0,n._)("span",null,(0,l.zw)(e.topic?.total_price),1)])),_:1}),(0,n.Wm)(f,{name:"guide-o",class:"icon-guide",size:"1rem",onClick:i[0]||(i[0]=(0,t.iM)((i=>e.handleShareClick(e.topic?.tid)),["stop"]))})]),(0,n.Wm)(C)])}a(7658);var p=a(7520),h=a(4870),v=a(2483),f=a(9089),m=a(9733),C=a(5882),g=(0,n.aZ)({props:{topic:{type:Object,required:!1}},emits:["showShareCard"],setup(e,{emit:i}){const a=(0,h.iH)(!1),n=(0,v.tv)(),t=(0,f.oR)(),l=(0,v.yj)(),c=t.state.login.userInfo,o=async()=>{if(t.state.login.userInfo.mixin_uuid){const i=await(0,p.oj)("/collect/check",{user_id:t.state.login.userInfo.mixin_uuid,tid:e.topic?.tid});null!==i.data&&(a.value=!0)}};o();const s=async()=>{if(c.mixin_uuid){if(!0===a.value){const i=await(0,p.oj)("/collect/delete",{user_id:t.state.login.userInfo.mixin_uuid,tid:e.topic?.tid});null!==i.data&&(a.value=!1),(0,m.F)("删除收藏!!!")}else{const i=await(0,p.oj)("/collect/add",{user_id:t.state.login.userInfo.mixin_uuid,tid:e.topic?.tid});null===i.data&&(a.value=!0),(0,m.F)("收藏成功!!!")}t.dispatch("main/handleCollecTopictAction")}else t.dispatch("login/accountLoginAction",l.path)},r=e=>{n.push(`/topic/${e}`)},u=e=>{console.log("handleShareClick"),i("showShareCard",e)};return{shareOptions:C.c,isCollect:a,handleCollectClick:s,handleTopicClick:r,handleShareClick:u}}}),k=a(89);const _=(0,k.Z)(g,[["render",d],["__scopeId","data-v-a5def406"]]);var w=_},8264:function(e,i,a){a.r(i),a.d(i,{default:function(){return m}});var n=a(3396);const t=e=>((0,n.dD)("data-v-dfc2cb60"),e=e(),(0,n.Cn)(),e),l={class:"search"},c={class:"search-header"},o=t((()=>(0,n._)("span",{class:"nav-title"},[(0,n._)("strong",null,"BETXIN")],-1)));function s(e,i,a,t,s,r){const u=(0,n.up)("van-icon"),d=(0,n.up)("van-search"),p=(0,n.up)("single-topic");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("div",c,[(0,n.Wm)(u,{name:"arrow-left",size:"1.5rem",onClick:e.handleBackClick},null,8,["onClick"]),o]),(0,n.Wm)(d,{modelValue:e.searchValue,"onUpdate:modelValue":i[0]||(i[0]=i=>e.searchValue=i),"show-action":"",placeholder:"Please input...",onSearch:e.handleSearchClick,onCancel:e.handleCancelSearch,maxlength:"10","action-text":"Cancel"},null,8,["modelValue","onSearch","onCancel"]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.searchTopicList,(e=>((0,n.wg)(),(0,n.j4)(p,{key:e,topic:e},null,8,["topic"])))),128))])}var r=a(7520),u=a(4870),d=a(2483),p=a(1591),h=(0,n.aZ)({components:{SingleTopic:p.Z},setup(){const e=(0,d.tv)(),i=(0,u.iH)("");let a=(0,u.iH)();const n=(0,u.iH)(!1),t=(0,u.iH)(!1),l=()=>{e.back()},c=async()=>{n.value=!0;const e=await(0,r.bD)("/topic/search",{offset:a.value?.length??0,limit:10,intro:i.value});console.log(e),a.value=e.data.list,t.value=!1},o=()=>{i.value="",a.value=[]};return{searchValue:i,loading:n,finished:t,searchTopicList:a,handleBackClick:l,handleSearchClick:c,handleCancelSearch:o}}}),v=a(89);const f=(0,v.Z)(h,[["render",s],["__scopeId","data-v-dfc2cb60"]]);var m=f}}]);
//# sourceMappingURL=264.89bd7672.js.map